<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="./css/style-perfil.css" />
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<link rel="shortcut icon" href="./imgs/chok 3.png" type="image/x-icon">

	<title>Perfil | Chokers</title>
</head>

<body onload="user(), listarPostsUsuario(), listarPessoasOnline()">
	<nav id="nav_perfil">
		<section id="sect_perfil_nav">
			<div class="div_nav_topo" id="div_nav_topo">
				<img src="./imgs/img_perfil-teste.jpg" alt="" id="img_perfil_nav" />

				<div class="div_perfil1_nav_topo"></div>

				<div class="div_perfil2_nav_topo"></div>
			</div>
		</section>

		<div class="div_nav">
			<div class="nome_user">
				<h1 class="nomeUsuario" id="nomeUsuarioNav">Roberto Carlos</h1>
				<p class="userUsuario" id="userUsuarioNav">@robeertinho</p>
			</div>

			<ul id="lista_nav">
				<li>
					<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
						fill="currentcolor" class="icone_lista" id="pagina_atual">
						<path
							d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z" />
					</svg>
					<button>
						<h3 id="pagina_atual">PERFIL</h3>
					</button>
				</li>
				<a href="./feed.html">
					<li>
						<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
							fill="currentcolor" class="icone_lista">
							<path
								d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z" />
						</svg>
						<h3>HOME</h3>
					</li>
				</a>
				<li onclick="abrirModal(modal_dash), atualizarGraficos(idUsuario)" id="li_config">
					<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
						fill="currentcolor" class="icone_lista">
						<path
							d="M440-120v-240h80v80h320v80H520v80h-80Zm-320-80v-80h240v80H120Zm160-160v-80H120v-80h160v-80h80v240h-80Zm160-80v-80h400v80H440Zm160-160v-240h80v80h160v80H680v80h-80Zm-480-80v-80h400v80H120Z" />
					</svg>
					<button>
						<h3>CONFIGURA√á√ïES</h3>
					</button>
				</li>
				<span id="span_sair">
					<a href="#" id="a_sair">
						<li onclick="sair()">
							<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
								fill="currentcolor" class="icone_lista">
								<path
									d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z" />
							</svg>
							<h3>SAIR</h3>
						</li>
					</a>
				</span>

			</ul>
		</div>
	</nav>

	<main id="main_perfil">
		<section id="sect_perfil_main">
			<div class="div_main_topo">
				<div class="div_pfp" id="main_pfp">
					<img src="./imgs/img_perfil-teste.jpg" alt="" id="img_perfil_main" />
				</div>

				<div class="div_perfil1_main_topo"></div>

				<div class="div_perfil2_main_topo" id="banner_perfil">
					<img src="./imgs/img-header-teste.jpg" alt="" id="img_header_main" />
				</div>
			</div>
		</section>

		<section id="sect_bio">
			<div class="div_corpo_bio">
				<div class="nome_user" id="nome_user_main">
					<h1 class="nomeUsuario" id="nomeUsuarioPerfil">
						Roberto Carlos
					</h1>
					<p class="userUsuario" id="userUsuarioPerfil">@robeertinho</p>
				</div>

				<div class="div_editar">
					<div class="div_btn_editar" onclick="abrirModal(modalEditarPerfil)">
						<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
							fill="currentcolor" class="icone_lista">
							<path
								d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z" />
						</svg>

						<h1>EDITAR</h1>
					</div>
				</div>
			</div>

			<p id="p_bio">
				ùêóùêï. l Â∫äÂçï ‚ùÄÍìº outono, folhas. lembro de quando seu sorriso soprou
				ventos de calma em mim.
			</p>

		</section>

		<div id="feed-container"></div>
	</main>

	<aside id="aside_perfil">



		<section id="sec_pessoas_online">

			<h1 id="titulo_online">Usuarios online</h1>



		</section>

		<div id="div_criar_chok">
			<button onclick="criar_popup()">
				<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
					fill="currentcolor" class="icone_lista">
					<path
						d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z" />
				</svg>
				<h1>Postar</h1>
			</button>
		</div>
	</aside>

	<section id="sec_editarPerfil_modal">
		<div class="div_editarPerfil_topo_modal">
			<div class="div_editarPerfil_fechar_modal" onclick="abrirModal(modalEditarPerfil)">
				<h1>X</h1>
			</div>

			<h1>Perfil</h1>
		</div>

		<div class="div_editarPerfil_corpo_modal">
			<label for="foto2" id="banner">
				<input type="file" accept="image/*" id="foto2" style="display: none" name="foto2"
					onchange="enviarBanner()" />
				<img src="./imgs/img-header-teste.jpg" alt="" id="div_editarPerfil_banner_modal" />
			</label>

			<label for="foto1" id="pfp">
				<input type="file" accept="image/*" id="foto1" style="display: none" name="foto1"
					onchange="enviarPfp()" />

				<img src="./imgs/img_perfil-teste.jpg" id="div_editarPerfil_pfp_modal" />
			</label>
		</div>

		<div class="div_editarPerfil_inputs_modal">
			<div class="div_inputNome_inputs_modal">
				<h1>Nome</h1>
				<textarea name="" id="nome_usuario_editar"></textarea>
			</div>
			<div class="div_inputBio_inputs_modal">
				<h1>bio</h1>
				<textarea name="" id="bio_usuario_editar"></textarea>
			</div>
			<div class="div_btn_salvar" onclick="salvarEdicao()">
				<h1>Salvar</h1>
			</div>
		</div>
	</section>

	<div id="div_popup">
		<div class="div_nav_topo">
			<img src="./imgs/img_perfil-teste.jpg" alt="" id="img_perfil_nav_chok" />

			<div class="div_perfil1_nav_topo"></div>

			<div class="div_perfil2_nav_topo">
				<span>
					<h1 class="nomeUsuario" id="nomeUsuario_popup"></h1>
					<p class="userUsuario" id="userUsuario_popup"></p>
				</span>

				<div class="div_fechar" onclick="fechar_popup()">
					<p>X</p>
				</div>
			</div>
		</div>

		<div class="div_corpo_popup">
			<textarea name="" id="textarea_descPost" placeholder="Fa√ßa seu Choke"></textarea>
			<label for="foto">
				<div class="div_add_img">
					<svg xmlns="http://www.w3.org/2000/svg" height="35px" viewBox="0 -960 960 960" width="35px"
						fill="currentcolor">
						<path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
					</svg>
				</div>
				<input type="file" name="foto" id="foto" style="display: none;" />
			</label>

			<div class="div_btns_popup">
				<button onclick="criar_post()">
					<svg xmlns="http://www.w3.org/2000/svg" height="35px" viewBox="0 -960 960 960" width="35px"
						fill="currentcolor">
						<path d="M120-160v-240l320-80-320-80v-240l760 320-760 320Z" />
					</svg>
				</button>
			</div>
		</div>
	</div>


	<section id="sec_comentario_modal">
		<div class="div_nav_topo" id="div_nav_topo_comentario">
			<img src="./imgs/img_perfil-teste.jpg" alt="" id="img_perfil_nav" />

			<div class="div_perfil1_nav_topo"></div>

			<div class="div_perfil2_nav_topo">
				<div class="nome_user">
					<h1 class="nomeUsuario" id="nomeUsuario_comentario_modal"></h1>
					<p class="userUsuario" id="userUsuario_comentario_modal"></p>
				</div>

				<div class="div_fechar" onclick="abrirModal(modal_comentario)">
					<h1>X</h1>
				</div>
			</div>
		</div>

		<div class="div_corpo_comentario_modal">
			<textarea name="" id="textarea_comentairo" placeholder="Fa√ßa seu comentario"></textarea>

			<div class="div_btns_comentario_modal">
				<button onclick="comentar()">
					<svg xmlns="http://www.w3.org/2000/svg" height="35px" viewBox="0 -960 960 960" width="35px"
						fill="currentcolor">
						<path d="M120-160v-240l320-80-320-80v-240l760 320-760 320Z" />
					</svg>
				</button>
			</div>
		</div>
	</section>

	<section id="sec_dash_modal">
		<div class="div_main_grafico_dash">
			<div class="div_top-minipost">
				<h1 class="titulo_dash">Suas intera√ß√µes</h1>
				<div class="div_fechar">
					<h1 onclick="abrirModal(modal_dash)" class="">X</h1>
				</div>
			</div>

			<div class="div_grafico_dash">

				<div class="div_util">

					<div class="div_info">

						<h1 class="h1_titulo_info">Inform√ß√µes do usuario:</h1>

						<div id="div_info_user">

							<p id="info_user"></p>
							<p id="info_email"></p>
							<p id="info_data"></p>


						</div>

					</div>

					<span class="span_cors">

						<div class="div_trocar_corp">

							<h1>Cor do Usuario: </h1>


							<input type="color" name="cor" id="inp_cor" onchange="trocarCor()">


						</div>
						<div class="div_trocar_tema">

							<h1>Alterar Modo</h1>


							<div id="alterar_modo_btn" onclick="alterar_modo()">

								<div class="alterar_modo_icone"><svg xmlns="http://www.w3.org/2000/svg" height="40px"
										viewBox="0 -960 960 960" width="40px" fill="currentcolor" id="modo_icone">
										<path
											d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z" />
									</svg></div>

							</div>

						</div>

					</span>

				</div>
				<!-- <canvas id="meuLineChart" width="1" height="1"></canvas> -->
				<canvas id="meuPineChart" width="1" height="1"></canvas>

			</div>
			<h1>Todas as intera√ß√µes:</h1>
			<div class="div_kpis_dash">

				<div class="kpi" id="div_kpiCurtida_dash">
					<h1>Total Curtidas:</h1>

					<div class="div_kpi_baixo">
						<!-- <img src="./imgs/curtida.svg" alt="" class="icone_dash" /> -->
						<svg xmlns="http://www.w3.org/2000/svg" height="100px" viewBox="0 -960 960 960" width="100px"
							fill="currentcolor" class="icone_dash">
							<path
								d="m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Zm0-108q96-86 158-147.5t98-107q36-45.5 50-81t14-70.5q0-60-40-100t-100-40q-47 0-87 26.5T518-680h-76q-15-41-55-67.5T300-774q-60 0-100 40t-40 100q0 35 14 70.5t50 81q36 45.5 98 107T480-228Zm0-273Z" />
						</svg>
						</svg>
						<h1 id="total_curtidas"></h1>
					</div>
				</div>

				<div class="kpi" id="div_kpiComentario_dash">
					<h1>Total Comentarios:</h1>

					<div class="div_kpi_baixo">
						<!-- <img src="./imgs/comentario.svg" alt="" class="icone_dash" /> -->

						<svg xmlns="http://www.w3.org/2000/svg" height="100px" viewBox="0 -960 960 960" width="100px"
							fill="currentcolor" class="icone_dash">
							<path
								d="M880-80 720-240H320q-33 0-56.5-23.5T240-320v-40h440q33 0 56.5-23.5T760-440v-280h40q33 0 56.5 23.5T880-640v560ZM160-473l47-47h393v-280H160v327ZM80-280v-520q0-33 23.5-56.5T160-880h440q33 0 56.5 23.5T680-800v280q0 33-23.5 56.5T600-440H240L80-280Zm80-240v-280 280Z" />
						</svg>
						<h1 id="total_comentarios"></h1>
					</div>
				</div>

				<dicom class="kpi" id="div_kpiPost_dash">
					<h1>Total Posts:</h1>

					<div class="div_kpi_baixo">
						<!-- <img src="./imgs/curtida.svg" alt="" class="icone_dash" /> -->


						<svg xmlns="http://www.w3.org/2000/svg" height="100px" viewBox="0 -960 960 960" width="100px"
							fill="currentcolor" class="icone_dash">
							<path
								d="M120-120v-720h720v720H120Zm600-160H240v60h480v-60Zm-480-60h480v-60H240v60Zm0-140h480v-240H240v240Zm0 200v60-60Zm0-60v-60 60Zm0-140v-240 240Zm0 80v-80 80Zm0 120v-60 60Z" />
						</svg>

						<h1 id="total_posts"></h1>
					</div>
			</div>
		</div>
		</div>

		<div id="post_mais_curtido">

		</div>
	</section>
</body>

</html>

<style>
	@import url("https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap");
</style>

<script>
	var modalAberto = false;

	var usuarioSemIntera√ß√µes = true

	var modo = "claro"

	var nomeUsuario = sessionStorage.NOME_USUARIO;
	var emailUsuario = sessionStorage.EMAIL_USUARIO;
	var userUsuario = sessionStorage.USER_USUARIO;
	var idUsuario = sessionStorage.ID_USUARIO;
	var bioUsuario = sessionStorage.BIO_USUARIO;
	var pfpUsuario = sessionStorage.PFP_USUARIO;
	var bannerUsuario = sessionStorage.BANNER_USUARIO;
	var dataUsuario = sessionStorage.DATAI_USUARIO

	var dataInscricaoUser = new Date(dataUsuario).toLocaleDateString('pt-BR')

	//moldals

	const modalEditarPerfil = "sec_editarPerfil_modal";
	const modalCriarChoke = "div_criar_chok";
	const modal_comentario = "sec_comentario_modal";
	const modal_dash = "sec_dash_modal"




	var comentarioAberto = false;

	function user() {
		console.log(`nome: ${nomeUsuario}`);
		console.log(`email: ${emailUsuario}`);
		console.log(`id: ${idUsuario}`);
		console.log(`user: ${userUsuario}`);
		console.log(`Essa √© a bio: ${bioUsuario}`);

		document.documentElement.style.setProperty('--var-cor-primaria', sessionStorage.CORPRI);


		document.documentElement.style.setProperty(
			"--var-cor-secundaria",
			sessionStorage.CORSEC
		);

		document.documentElement.style.setProperty(
			"--var-cor-terciaria",
			sessionStorage.CORTERC
		);

		document.documentElement.style.setProperty(
			"--var-cor-secundaria-escura",
			sessionStorage.CORSECE
		);

		if (sessionStorage.CORSEC == "#f7e6ff") {
			modo_icone.innerHTML = `<path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"/>`
		} else {
			modo_icone.innerHTML = `<path
										d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z" />`
		}

		nome_usuario_editar.value = nomeUsuario;

		if (bioUsuario === "null") {
			bio_usuario_editar.value = "";
		} else {
			bio_usuario_editar.value = bioUsuario;
		}

		p_bio.innerHTML = bioUsuario;
		nomeUsuarioPerfil.innerHTML = nomeUsuario;
		userUsuarioPerfil.innerHTML = `@${userUsuario}`;
		nomeUsuarioNav.innerHTML = nomeUsuario;

		info_user.innerHTML = `user: @${userUsuario}`
		info_email.innerHTML = `Email: ${emailUsuario}`
		info_data.innerHTML = `Data de Incri√ß√£o: ${dataInscricaoUser}`

		img_perfil_nav_chok.src = `./assets/foto_perfil/${pfpUsuario}`

		nomeUsuario_popup.textContent = nomeUsuario
		userUsuario_popup.textContent = `@${userUsuario}`





		div_nav_topo_comentario.innerHTML = `<img src="./assets/foto_perfil/${pfpUsuario}" alt="" id="img_perfil_nav">

	            <div class="div_perfil1_nav_topo">
	            </div>

	            <div class="div_perfil2_nav_topo">

	                <div class="nome_user">

	                    <h1 class="nomeUsuario" id="nomeUsuario_comentario_modal">${nomeUsuario}</h1>
	                    <p class="userUsuario" id="userUsuario_comentario_modal">@${userUsuario}</p>

	                </div>

	                <div class="div_fechar" onclick="abrirModal(modal_comentario)">
	                    <h1>X</h1>
	                </div>
	            </div>
	`;
		userUsuarioNav.innerHTML = `@${userUsuario}`;

		div_editarPerfil_pfp_modal.src = `./assets/foto_perfil/${pfpUsuario}`;
		div_editarPerfil_banner_modal.src = `./assets/foto_perfil/${bannerUsuario}`;

		banner_perfil.innerHTML = `<img src="./assets/foto_perfil/${bannerUsuario}" alt="" id="img_header_main">
	`;

		main_pfp.innerHTML = `<img src="./assets/foto_perfil/${pfpUsuario}" id="img_perfil_main">`;
		div_nav_topo.innerHTML = `


	                <img src="./assets/foto_perfil/${pfpUsuario}" alt="" id="img_perfil_nav">

	                <div class="div_perfil1_nav_topo">
	                </div>

	                <div class="div_perfil2_nav_topo">
	                </div>

	        `;

		fetch(`/usuarios/status/${idUsuario}`, {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				statusUsuario: 1,
			}),
		}).then(function (resposta) {
			console.log("resposta: ", resposta);
		});
	}

	function criar_popup() {
		div_popup.style.display = "block";
		nav_perfil.classList.add("blur");
		main_perfil.classList.add("blur");
		aside_perfil.classList.add("blur");
	}

	function fechar_popup() {
		div_popup.style.display = "none";
		nav_perfil.classList.remove("blur");
		main_perfil.classList.remove("blur");
		aside_perfil.classList.remove("blur");
	}

	function abrirModal(modalId, idPost) {
		console.log("tentando abrir o modal");

		const modal = document.getElementById(modalId);

		sessionStorage.ID_POST_ATUAL = idPost;

		if (modalAberto) {
			modal.style.display = "block";
			modal.style.left = "-50%";
			modalAberto = false;

			nav_perfil.classList.remove("blur");
			main_perfil.classList.remove("blur");
			aside_perfil.classList.remove("blur");
		} else {
			modal.style.display = "block";
			modal.style.left = "50%";
			modalAberto = true;

			nav_perfil.classList.add("blur");
			main_perfil.classList.add("blur");
			aside_perfil.classList.add("blur");
		}
	}

	function comentar(idPost) {
		var descComentarioVar = textarea_comentairo.value;
		idPost = sessionStorage.ID_POST_ATUAL;

		fetch(`/post/comentar/${idPost}`, {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				descComentario: descComentarioVar,
				idUsuario: sessionStorage.ID_USUARIO,
			}),
		}).then(() => {
			abrirModal(modal_comentario);

			comentarioAberto = false;

			listarComentarios(idPost);

			textarea_comentairo.value = "";
		});
	}

	function enviarPfp() {
		var imagem = foto1.files[0];
		console.log(`Essa √© a imagem de perfil ${imagem}`);

		const formData = new FormData();
		formData.append("foto", imagem);
		formData.append("idUsuario", idUsuario);

		fetch("/usuarios/enviarPfp", {
			method: "POST",
			body: formData,
		})
			.then((resposta) => {
				console.log("edi√ß√£o pfp realizada com sucesso!");
				atualizarUser(idUsuario);
			})
			.catch((err) => {
				console.log(`#ERRO: ${err}`);
			});
	}

	function listarComentarios(idPost) {
		if (!comentarioAberto) {
			comentarioAberto = true;
			fetch(`/post/listarComentarios/${idPost}`)
				.then((response) => response.json())
				.then((comentarios) => {
					const comentarioDiv = document.getElementById(
						`comentarios_post_${idPost}`
					);

					comentarioDiv.innerHTML = "";

					const cabecarioComentario = document.getElementById(
						`cabecario_comentario_${idPost}`
					);
					cabecarioComentario.style.display = "flex";

					comentarios.forEach((comentario) => {
						const userComentarioDiv = document.createElement("div");
						userComentarioDiv.className = "user_comentario_div";

						const imagemUserComentarios = document.createElement("img");
						imagemUserComentarios.src = `./assets/foto_perfil/${comentario.pfpUsuario}`;
						imagemUserComentarios.className = "img_perfil_comentario";

						const nomeUsuarioComentarios = document.createElement("div");
						nomeUsuarioComentarios.className = "div_info_comentario";

						const h1NomeComentario = document.createElement("h1");
						h1NomeComentario.className = "nomeUsuario";
						h1NomeComentario.textContent = comentario.nomeUsuario;

						const pUserComentario = document.createElement("p");
						pUserComentario.className = "userUsuario";
						pUserComentario.textContent = `@${comentario.userUsuario}`;

						nomeUsuarioComentarios.appendChild(h1NomeComentario);
						nomeUsuarioComentarios.appendChild(pUserComentario);

						userComentarioDiv.appendChild(imagemUserComentarios);
						userComentarioDiv.appendChild(nomeUsuarioComentarios);

						const descComentarioDiv = document.createElement("div");
						descComentarioDiv.className = "div_desc_comentario";

						const descComentario = document.createElement("p");
						descComentario.className = "p_desc_comentario";
						descComentario.textContent = comentario.descComentario;

						descComentarioDiv.appendChild(descComentario);

						comentarioDiv.appendChild(userComentarioDiv);
						comentarioDiv.appendChild(descComentarioDiv);
					});
				})
				.catch((err) => {
					console.error("Erro ao listar coment√°rios:", err);
					comentarioAberto = false;
				});
		} else {
			comentarioAberto = false;
			const comentarioDiv = document.getElementById(
				`comentarios_post_${idPost}`
			);
			comentarioDiv.innerHTML = "";

			const cabecarioComentario = document.getElementById(
				`cabecario_comentario_${idPost}`
			);
			cabecarioComentario.style.display = "none";
		}
	}

	function enviarBanner() {
		const imagem = foto2.files[0];

		console.log(`Esse √© o banner ${imagem}`);

		const formData = new FormData();
		formData.append("foto", imagem);
		formData.append("idUsuario", idUsuario);

		fetch("/usuarios/enviarBanner", {
			method: "POST",
			body: formData,
		})
			.then((resposta) => {
				console.log("edi√ß√£o banner realizada com sucesso!");
				atualizarUser(idUsuario);
			})
			.catch((err) => {
				console.log(`#ERRO: ${err}`);
			});
	}

	function salvarEdicao() {
		fetch("/usuarios/editar", {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				nomeUsuarioServer: nome_usuario_editar.value,
				bioUsuarioServer: bio_usuario_editar.value,
				idUsuarioServer: idUsuario,
			}),
		})
			.then((resultado) => {
				console.log("Edi√ß√£o realizada com sucesso!");

				sessionStorage.NOME_USUARIO = nome_usuario_editar.value;
				sessionStorage.BIO_USUARIO = bio_usuario_editar.value;

				abrirModal(modalEditarPerfil);

				setTimeout(function () {
					location.reload();
				}, 500);
			})
			.catch((err) => {
				console.log(`#ERRO: ${err}`);
			});
	}

	function listarPostsUsuario() {
		fetch(`/usuarios/${idUsuario}`, {})
			.then((response) => response.json())

			.then((dadosPost) => {
				const feedContainer = document.getElementById("feed-container");
				feedContainer.innerHTML = "";

				if (!(dadosPost.length == 0)) {
					console.log("vc n tem posts")

					usuarioSemIntera√ß√µes = false
				}


				dadosPost.forEach((post) => {
					var idPost = post.idPost;

					var idConvidado = post.idUsuario;
					const postDiv = document.createElement("div");
					postDiv.className = "div_post";
					postDiv.id = post.idPost;

					const section = document.createElement("section");
					section.className = "sect_perfil_post";

					const topo = document.createElement("div");
					topo.className = "div_post_topo";

					const imgPerfil = document.createElement("img");
					imgPerfil.src = `./assets/foto_perfil/${post.pfpUsuario}`;
					imgPerfil.className = "img_perfil_post";
					imgPerfil.onclick = () => buscarPerfil(idConvidado);

					const div1 = document.createElement("div");
					div1.className = "div_perfil1_post_topo";

					const div2 = document.createElement("div");
					div2.className = "div_perfil2_post_topo";

					const nomeDiv = document.createElement("div");
					nomeDiv.className = "nome_user";

					const h1 = document.createElement("h1");
					h1.className = "nomeUsuario";
					h1.textContent = post.nomeUsuario;

					const p = document.createElement("p");
					p.className = "userUsuario";
					p.textContent = `@${post.userUsuario}`;

					nomeDiv.appendChild(h1);
					nomeDiv.appendChild(p);
					div2.appendChild(nomeDiv);
					topo.appendChild(imgPerfil);
					topo.appendChild(div1);
					topo.appendChild(div2);
					section.appendChild(topo);

					// Corpo do post
					const corpo = document.createElement("div");
					corpo.id = "corpo_post";
					corpo.className = "div_corpo_post";

					const descDiv = document.createElement("div");
					descDiv.className = "div_post_desc";

					const descP = document.createElement("p");
					descP.className = "p_descPost";
					descP.textContent = post.descPost;

					descDiv.appendChild(descP);

					if (post.imgPost != "null") {
						const imgDiv = document.createElement("div");
						imgDiv.className = "div_post_img";

						const imgPost = document.createElement("img");
						imgPost.id = "img_corpo_post";
						imgPost.src = `assets/${post.imgPost}`;

						imgDiv.appendChild(imgPost);

						corpo.appendChild(imgDiv);
					}

					corpo.appendChild(descDiv);
					postDiv.appendChild(section);
					postDiv.appendChild(corpo);

					const iconsDiv = document.createElement("div");
					iconsDiv.className = "div_icons_post";

					iconsDiv.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentcolor" id="icone_comentario_post" class="img_post_comentario" onclick="listarComentarios(${idPost})"><path d="M880-80 720-240H320q-33 0-56.5-23.5T240-320v-40h440q33 0 56.5-23.5T760-440v-280h40q33 0 56.5 23.5T880-640v560ZM160-473l47-47h393v-280H160v327ZM80-280v-520q0-33 23.5-56.5T160-880h440q33 0 56.5 23.5T680-800v280q0 33-23.5 56.5T600-440H240L80-280Zm80-240v-280 280Z"/></svg>

	                    <div class="curtidas_post" id="icon_curtida_${idPost}">

	                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentcolor" id="icone_curtida_post" class="img_post_curtida" onclick="curtir(${idPost})"><path d="m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Zm0-108q96-86 158-147.5t98-107q36-45.5 50-81t14-70.5q0-60-40-100t-100-40q-47 0-87 26.5T518-680h-76q-15-41-55-67.5T300-774q-60 0-100 40t-40 100q0 35 14 70.5t50 81q36 45.5 98 107T480-228Zm0-273Z"/></svg>

	                    </div>
	                    `;

					corpo.appendChild(iconsDiv);

					const comentarioDiv = document.createElement("div");
					comentarioDiv.className = "div_comentario";
					comentarioDiv.id = `comentarios_post_${post.idPost}`;

					const cabecarioComentario = document.createElement("div");
					cabecarioComentario.className = "cabecario_comentario";
					cabecarioComentario.id = `cabecario_comentario_${post.idPost}`;

					const tituloComentario = document.createElement("h1");
					tituloComentario.className = "titulo_comentario";
					tituloComentario.textContent = "Comentarios";

					const btnComentar = document.createElement("div");
					btnComentar.className = "div_bntComentar";
					btnComentar.onclick = () =>
						abrirModal(modal_comentario, post.idPost);

					btnComentar.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentcolor" id="icone_comentario_post_btn" class="img_post_comentario" onclick="listarComentarios(${idPost})"><path d="M880-80 720-240H320q-33 0-56.5-23.5T240-320v-40h440q33 0 56.5-23.5T760-440v-280h40q33 0 56.5 23.5T880-640v560ZM160-473l47-47h393v-280H160v327ZM80-280v-520q0-33 23.5-56.5T160-880h440q33 0 56.5 23.5T680-800v280q0 33-23.5 56.5T600-440H240L80-280Zm80-240v-280 280Z"/></svg>`;

					cabecarioComentario.appendChild(tituloComentario);
					cabecarioComentario.appendChild(btnComentar);

					corpo.appendChild(cabecarioComentario);
					corpo.appendChild(comentarioDiv);

					feedContainer.appendChild(postDiv);
				});
			})
			.catch((err) => {
				console.log(`#ERRO: ${err}`);
			});
	}

	function criar_post() {
		var descPostVar = textarea_descPost.value;

		console.log(descPostVar);

		var imagem = foto.files[0];

		if ((!descPostVar || descPostVar == "") && !imagem) {
			alert("Insira um texto ou uma imgem legal!");
		} else if ((!descPostVar || descPostVar == "") && imagem) {
			descPostVar = " ";

			const formData = new FormData();
			formData.append("foto", imagem);
			formData.append("descPost", descPostVar);
			formData.append("idUsuario", idUsuario);

			fetch("/post/postar", {
				method: "POST",
				body: formData,
			})
				.then((resposta) => {
					console.log("Post realizado com sucesso!");
					fechar_popup();
					listarPosts(); // recarregar feed
					foto.value = "";
					descPostVar = undefined;
				})
				.catch((err) => {
					console.log(`#ERRO: ${err}`);
					foto.value = "";
					descPostVar = undefined;
				});
		} else {
			const formData = new FormData();
			formData.append("foto", imagem);
			formData.append("descPost", descPostVar);
			formData.append("idUsuario", idUsuario);

			fetch("/post/postar", {
				method: "POST",
				body: formData,
			})
				.then((resposta) => {
					console.log("Post realizado com sucesso!");
					fechar_popup();
					listarPostsUsuario()(); // recarregar feed
					foto.value = "";
					descPostVar = undefined;
				})
				.catch((err) => {
					console.log(`#ERRO: ${err}`);
					foto.value = "";
					descPostVar = undefined;
				});
		}
	}

	function atualizarUser() {
		fetch(`/usuarios/atualizarUser/${idUsuario}`)
			.then((res) => res.json())
			.then((dadosAtt) => {
				console.log(dadosAtt[0]);

				sessionStorage.PFP_USUARIO = dadosAtt[0].pfpUsuario;
				pfpUsuario = sessionStorage.PFP_USUARIO;

				sessionStorage.BANNER_USUARIO = dadosAtt[0].bannerUsuario;
				bannerUsuario = sessionStorage.BANNER_USUARIO;

				location.reload();
			});
	}

	function curtir(idPost) {
		fetch(`/post/curtir/${idPost}`, {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				idUsuario: sessionStorage.ID_USUARIO,
			}),
		}).then((res) => {
			if (res.ok) {
				var curtiu = true;

				alert("curtida realizada");
				contarCurtida(idPost, curtiu);
			} else {
				descurtir(idPost);
			}
		});
	}

	function descurtir(idPost) {
		fetch(`/post/descurtir/${idPost}`, {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				idUsuario: sessionStorage.ID_USUARIO,
			}),
		}).then(() => {
			var curtiu = false;

			alert("descurtida realizada");
			contarCurtida(idPost, curtiu);
		});
	}

	function contarCurtida(idPost, curtiu) {
		fetch(`/post/contarCurtida/${idPost}`)
			.then((response) => response.json())
			.then((curtidas) => {
				var divCurtidas = document.getElementById(`icon_curtida_${idPost}`);

				console.log(curtidas[0].qtdCurtidas);

				if (curtiu) {
					divCurtidas.innerHTML = `
	                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentcolor" id="icone_curtida_post" class="img_post_curtida" onclick="curtir(${idPost})"><path d="m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Z"/></svg>
	                    <p>${curtidas[0].qtdCurtidas}</p>
	                   `;
				} else {
					if (!(curtidas[0].qtdCurtidas == 0)) {
						divCurtidas.innerHTML = `
	                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentcolor" id="icone_curtida_post" class="img_post_curtida" onclick="curtir(${idPost})"><path d="m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Zm0-108q96-86 158-147.5t98-107q36-45.5 50-81t14-70.5q0-60-40-100t-100-40q-47 0-87 26.5T518-680h-76q-15-41-55-67.5T300-774q-60 0-100 40t-40 100q0 35 14 70.5t50 81q36 45.5 98 107T480-228Zm0-273Z"/></svg>

	                    <p>${curtidas[0].qtdCurtidas}</p>
	                   `;
					} else {
						divCurtidas.innerHTML = `
	                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentcolor" id="icone_curtida_post" class="img_post_curtida" onclick="curtir(${idPost})"><path d="m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Zm0-108q96-86 158-147.5t98-107q36-45.5 50-81t14-70.5q0-60-40-100t-100-40q-47 0-87 26.5T518-680h-76q-15-41-55-67.5T300-774q-60 0-100 40t-40 100q0 35 14 70.5t50 81q36 45.5 98 107T480-228Zm0-273Z"/></svg>
	                               `;
					}
				}
			});
	}

	//charjs

	//grafico linha





	function buscarPerfil(idConvidado) {
		console.log(idConvidado);

		sessionStorage.ID_CONVIDADO = idConvidado;

		window.location = "perfilSeguidor.html";
	}

	var varTotal_curtidas = 0
	var varTotal_com = 0
	var varTotal_posts = 0

	var minipostExiste = false

	function atualizarGraficos() {

		sec_dash_modal.style.display = "flex"

		if (usuarioSemIntera√ß√µes) {

			alert('fa√ßa suas primeiras intera√ß√µes')

		} else {



			fetch(`/usuarios/dashPostMaisCurtido/${idUsuario}`)
				.then((response) => response.json())
				.then((dados) => {

					if (!minipostExiste) {

						minipostExiste = true

						var post_mais_curtidas = document.getElementById("post_mais_curtido")

						var sec_dash_modal = document.getElementById("sec_dash_modal")

						// post_mais_curtidas.style.display = "block"

						// sec_dash_modal.style.justifyContent = "space-between"


						const minipost = document.createElement("div");
						minipost.className = "minipost";

						const titulo = document.createElement("h1")
						titulo.textContent = "Post mais curtido"

						minipost.appendChild(titulo)

						console.log("qtd imagns" + dados[0].imagensPost.length)

						if (dados[0].imagensPost != "null") {

							const div_minipost_img = document.createElement("div")
							div_minipost_img.className = "div_minipost_img"

							const minipost_img = document.createElement("img")
							minipost_img.src = `assets/${dados[0].imagensPost}`
							minipost_img.id = "img_corpo_minipost"

							div_minipost_img.appendChild(minipost_img)

							minipost.appendChild(div_minipost_img)


						}

						if (dados[0].descPost != "null") {

							const div_desc_minipost = document.createElement("div")
							div_desc_minipost.className = "div_desc_minipost"

							const desc_minipost = document.createElement("p")
							desc_minipost.textContent = `${dados[0].descPost}`

							div_desc_minipost.appendChild(desc_minipost)

							minipost.appendChild(div_desc_minipost)

						}

						const div_qtd_curtidas = document.createElement("div")
						div_qtd_curtidas.className = "div_qtd_curtidas_minipost"
						div_qtd_curtidas.style.display = "flex"


						const qtd_curtidas = document.createElement("h1")
						qtd_curtidas.textContent = `Curtidas ${dados[0].totalCurtidas}`

						div_qtd_curtidas.appendChild(qtd_curtidas)

						div_qtd_curtidas.innerHTML += `<svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="currentcolor" class="icone_dash"><path d="m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Zm0-108q96-86 158-147.5t98-107q36-45.5 50-81t14-70.5q0-60-40-100t-100-40q-47 0-87 26.5T518-680h-76q-15-41-55-67.5T300-774q-60 0-100 40t-40 100q0 35 14 70.5t50 81q36 45.5 98 107T480-228Zm0-273Z"/></svg>`

						minipost.appendChild(div_qtd_curtidas)

						const tituloCurtidas = document.createElement("h1")
						tituloCurtidas.textContent = `Quem curtiu`

						minipost.appendChild(tituloCurtidas)

						const div_curtidas_minipost = document.createElement("div")
						div_curtidas_minipost.id = `div_pessoasCurtiu`

						fetch(`usuarios/dashPostMaisCurtidosCurtidas/${dados[0].idPost}`)
							.then((response) => response.json())
							.then((curtidas) => {

								curtidas.forEach((quemCurtiu) => {

									const idConvidado = quemCurtiu.idQuemCurtiu
									const div_curtiu_minipost = document.createElement('div')
									div_curtiu_minipost.className = "div_quem_curtiu"

									const img_curtiu = document.createElement("img")
									img_curtiu.src = `assets/foto_perfil/${quemCurtiu.pfpUsuario}`
									img_curtiu.className = `pfp_quem_curtiu`
									img_curtiu.style.cursor = "pointer"
									img_curtiu.onclick = () => buscarPerfil(idConvidado);

									div_curtiu_minipost.appendChild(img_curtiu)

									const div_info_usuario = document.createElement("div")

									const nome_usuario = document.createElement("h1")
									nome_usuario.textContent = `${quemCurtiu.nomeQuemCurtiu}`

									const user_usuario = document.createElement("p")
									user_usuario.textContent = `${quemCurtiu.userQuemCurtiu}`

									const data_curtiu = document.createElement("p")
									data_curtiu.textContent = `${quemCurtiu.diaQuemCurtiu}`

									div_info_usuario.appendChild(nome_usuario)
									div_info_usuario.appendChild(user_usuario)
									div_info_usuario.appendChild(data_curtiu)

									div_curtiu_minipost.appendChild(div_info_usuario)

									div_curtidas_minipost.appendChild(div_curtiu_minipost)



								})


							})




						minipost.appendChild(div_curtidas_minipost)





						post_mais_curtidas.appendChild(minipost)
					}

				})
				.catch(() => {
					console.log("erro no atualizarGraficos")
				})

			fetch(`usuarios/dashTotalCurtidas/${idUsuario}`)
				.then((response) => response.json())
				.then((curtidas) => {

					console.log(curtidas[0].total_curtidas)

					varTotal_curtidas = curtidas[0].total_curtidas

					total_curtidas.innerHTML = `${curtidas[0].total_curtidas}`

					fetch(`usuarios/dashTotalComentarios/${idUsuario}`)
						.then((response) => response.json())
						.then((com) => {

							console.log(com[0].total_com)

							varTotal_com = com[0].total_com

							total_comentarios.innerHTML = `${com[0].total_com}`

							fetch(`usuarios/dashTotalPosts/${idUsuario}`)
								.then((response) => response.json())
								.then((post) => {

									console.log(post[0].total_posts)

									varTotal_posts = post[0].total_posts

									total_posts.innerHTML = `${post[0].total_posts}`

									grafico()
								})

						})

				})



		}

	}

	var cortexto = "#ffffff"


	function grafico() {
		// console.log(varTotal_posts)


		var graficoD = document.getElementById('meuPineChart');

		if (window.meuGrafico) window.meuGrafico.destroy();

		// graficoD.destroy()


		window.meuGrafico = new Chart(graficoD, {
			type: "doughnut",
			data: {
				labels: ['Curtidas', 'Comentarios', 'Posts'],
				datasets: [
					{
						data: [varTotal_curtidas, varTotal_com, varTotal_posts],
						backgroundColor: ['#7D1128', '#2b2d42', '#EDF2F4'],
						borderRadius: 5

					},
				]
			},
			options: {

				plugins: {
					title: {
						display: true,
						text: 'Suas Intera√ß√µes',
						font: {
							size: 18
						},
						color: cortexto,
						padding: {
							top: 10,
							bottom: 30
						}
					}
				}
			}
		});

		// graficoD.update();
	}

	function alterar_modo() {

		if (modo == "claro") {

			let corSec = "#171010"

			document.documentElement.style.setProperty('--var-cor-secundaria', corSec);

			document.documentElement.style.setProperty('--var-cor-terciaria', 'white');

			document.documentElement.style.setProperty('--var-cor-secundaria-escura', '#0f0f0f');

			sessionStorage.CORSEC = corSec

			sessionStorage.CORTERC = "white"

			sessionStorage.CORSECE = "#0f0f0f"

			modo = "escuro"

			cortexto = "#ffffff"

			modo_icone.innerHTML = `<path
										d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z" />`

			grafico()

		} else {

			let corSec = "#f7e6ff"

			document.documentElement.style.setProperty('--var-cor-secundaria', corSec);


			document.documentElement.style.setProperty('--var-cor-terciaria', 'black');


			document.documentElement.style.setProperty('--var-cor-secundaria-escura', 'white');


			sessionStorage.CORSEC = corSec

			sessionStorage.CORTERC = "black"

			sessionStorage.CORSECE = "white"

			modo = "claro"

			cortexto = "#000000"

			modo_icone.innerHTML = `<path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"/>`

			grafico()
		}



	}



	function trocarCor() {


		const corPri = inp_cor.value;
		document.documentElement.style.setProperty('--var-cor-primaria', corPri);

		sessionStorage.CORPRI = corPri

		fetch(`/usuarios/trocarCor/${idUsuario}`, {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				cor: corPri,
			}),
		})
			.then(() => {
				console.log("trocou")

			})
			.catch(() => {
				console.log("n trocou")
			})

	}


	function listarPessoasOnline() {


		fetch(`usuarios/listarPessoasOnline/${idUsuario}`)
			.then((response) => response.json())
			.then((online) => {

				const sec_pessoas_online = document.getElementById("sec_pessoas_online")

				console.log("quem online" + online[0])


				online.forEach((quemOnline) => {

					console.log("quem online" + quemOnline[0])

					const idConvidado = quemOnline.idOnline
					const div_online = document.createElement('div')
					div_online.className = "div_quem_online"

					const div_topo_online = document.createElement('div')
					div_topo_online.className = "div_topo_online"

					const img_online = document.createElement("img")
					img_online.src = `assets/foto_perfil/${quemOnline.pfpQuemOnline}`
					img_online.className = `pfp_quem_online`
					img_online.style.cursor = "pointer"
					img_online.onclick = () => buscarPerfil(idConvidado);

					div_online.appendChild(img_online)

					const div_info_usuario = document.createElement("div")
					div_info_usuario.className = "div_info_online"

					const nome_usuario = document.createElement("h1")
					nome_usuario.textContent = `${quemOnline.nomeOnline}`

					const user_usuario = document.createElement("p")
					user_usuario.textContent = `@${quemOnline.userOnline}`

					div_info_usuario.appendChild(nome_usuario)
					div_info_usuario.appendChild(user_usuario)

					const div_banner_online = document.createElement('div')
					div_banner_online.className = "div_banner_online"

					const img_banner_online = document.createElement('img')
					img_banner_online.src = `assets/foto_perfil/${quemOnline.bannerQuemOnline}`
					img_banner_online.id = `img_banner_online_${idConvidado}`

					div_banner_online.appendChild(img_banner_online)



					div_topo_online.appendChild(img_online)
					div_topo_online.appendChild(div_info_usuario)

					div_online.appendChild(div_topo_online)

					div_online.appendChild(div_banner_online)

					sec_pessoas_online.appendChild(div_online)




				})


			})


	}


	function sair() {

		fetch(`/usuarios/status/${idUsuario}`, {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				statusUsuario: 0,
			}),
		}).then(function (resposta) {
			console.log("resposta: ", resposta);

			window.location = "index.html";
		});
	}

	window.onbeforeunload = () => {

		const status = {
			statusUsuario: 0
		};

		const blob = new Blob([JSON.stringify(status)], { type: 'application/json' });

		navigator.sendBeacon(`usuarios/status/${idUsuario}`, blob)


	}

</script>